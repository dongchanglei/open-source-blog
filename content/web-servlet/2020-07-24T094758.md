---
desc: 由 genpost (https://github.com/hidevopsio/genpost) 代码生成器生成
title: Tomcat
date: 2020-07-24T09:47:58+08:00
author: 箜箜如也
draft: false
tags:
- Tomcat
---

## WEB技术
1. 早期的web应用主要用于浏览新闻等静态页面，用户通过HTTP协议请求服务器上的**静态页面**，服务器上的web服务器软件接收到请求后，读取URI标示的资源，再加上消息报头发送给客户端浏览器，浏览器负责解析HTML，将结果呈现出来。
2. 随着时间发展，用户需要一些交互操作，获取一些动态结果；所以需要一些扩展机制来实现用户想要的功能；早期使用的Web服务器扩展机制是CGI（Common Gateway Interface，公共网关接口）。
3. CGI：是外部应用程序(CGI程序)与Web服务器之间的接口标准，是在CGI程序和Web服务器之间传递信息的规程；使用这种方法，用户单击某个链接或输入网址来访问CGI程序，web服务器收到请求后，运行该CGI程序，对用户请求进行处理，紧接着将处理结果并产生一个响应，该响应被返回给web服务器，web服务器对响应进行包装，以HTTP响应的方式返回给浏览器。
4. CGI程序在一定程度上解决了用户需求。不过还存在一些不足之处，如CGI程序编写困难，响应时间较长，以进程方式运行导致性能受限；个人理解，就是java应用socket技术实现网络通信，使client与server进行交互的一个缩影。

## SERVLET接口

```
浏览器发给服务端的是一个HTTP格式的请求，HTTP服务器收到这个请求后，需要调用服务端程序来处理，所谓的服务端程序就是写的Java类(对于java开发来说啊)，一般来说不同的请求需要由不同的Java类来处理。
```

**但是，HTTP服务器怎么知道要调用哪个Java类的哪个方法呢？？？？**

```
咱们继续推进，最直接的办法就是在HTTP服务器里面硬编码来判断哪个请求调用哪个类的哪个方法不就OK了吗。
```

**虽然可以解决调用问题，但这样做明显存在其他问题啊**

```
因为HTTP服务器的代码跟业务逻辑耦合在一起了，如果新加一个业务方法还要改HTTP服务器的代码，高度耦合。
```

**于是乎，面向接口编程这个解决耦合问题的法宝便出现了**

```
定义了一个接口，各种业务类都必须实现这个接口，这个接口就叫Servlet接口；我们通常把实现了Servlet接口的业务类叫作Servlet。
```

**但是情况不容乐观这里还有问题啊，对于特定的请求呢，HTTP服务器如何知道由哪个Servlet来处理呢？Servlet又该由谁初始化呢？**

```
HTTP服务器很显然不适合做这个工作，不然又跟业务代码耦合在一起了。
顺理成章Servlet容器变风光上场了！！！
```

## Servlet与Servlet容器
1. 于是1997年，sun公司推出了**Servlet技术**，作为java阵营的CGI解决方案。
2. Servlet是平台独立的Java类，编写一个Servlet，**实际上就是按照Servlet规范编写一个Java类**。Servlet被编译为平台独立的字节码，可以被动态地加载到支持Java技术的Web服务器中运行。
3. Servlet就是一个普普通通的Java类，它没有main方法，不能独立运行；这时候就需要解决服务器如何来运行这个Servlet程序。
4. 为了运行Servlet程序，Servlet容器便出现了。
5. Servlet容器的主要作用是：

    ```
    Servlet容器用来加载和管理业务类。 
    ```
    
6. Servlet容器工作模式的不同，Servlet容器有以下分类：

    1> 独立的Servlet容器 
    
        当我们使用基于Java技术的Web服务器时，Servlet容器作为构成Web服务器的一部分而存在；然而大多数的Web服务器并非基于Java语言，因此，就有了下面两种Servlet容器的工作模式。
        
    2> 进程内的Servlet容器
    
        Servlet容器由Web服务器插件和Java容器两部分实现组成。Web服务器插件在某个Web服务器内部地址空间中打开一个JVM（Java虚拟机），使得Java容器可以在此JVM中加载并运行Servlet。如有客户端调用Servlet的请求到来，插件取得对此请求的控制并将它传递（使用JNI技术）给Java容器，然后由Java容器将此请求交由Servlet进行处理。**进程内的Servlet容器对于单进程、多线程的服务器非常适合，提供了较高的运行速度，但伸缩性有所不足**。JNI 即Java native interface，是一种技术，提供了丰富的接口，可以在Java层调用native代码，也可以在native层调用Java代码，native代码一般是指C/C++程序或者其他语音。
        
    3> 进程外的Servlet容器
    
        Servlet容器运行于Web服务器之外的地址空间，它也是由Web服务器插件和Java容器两部分实现组成的。Web服务器插件和Java容器（在外部JVM中运行）使用IPC机制（通常是TCP/IP）进行通信。当一个调用Servlet的请求到达时，插件取得对此请求的控制并将其传递（使用IPC机制）给Java容器。进程外Servlet容器对客户请求的响应速度不如进程内的Servlet容器，但进程外容器具有更好的伸缩性和稳定性。IPC机制 Inter-Process Communication 多个进程间的通信机制，两个进程间进行数据交互的过程；在linux下有多种进程间通信的方法：半双工管道、命名管道、消息队列、信号、信号量、共享内存、内存映射文件，socket等等。
        
**HTTP服务器和Servlet容器完美组合，就满足了业务需求！！！**

```
建立socket连接
调用Servlet处理业务逻辑
响应数据
关闭socket连接
```

**此时，Servlet接口和Servlet容器这一整套规范变成了Servlet规范，Tomcat实现了这个规范同时增加了HTTP服务能力，轻量级的WEB服务器Tomcat变随即问世了。**
    
## TOMCAT容器

Tomcat是一个免费的开放源的Servlet容器，并且具有处理HTTP请求的能力，因此称它为轻量级的WEB服务器。






